<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- Google Font and  Materialize -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <title>FriendFinder Survey</title>
</head>

<body>
  <div class="container">

    <div class="row">
      <div class="col s12 center-align">
        <h1>Friend Finder <a href="/" class="btn-floating btn-large cyan"><i class="material-icons">home</i></a></h1>
        <hr>
      </div>
      <div class="col s12 center-align">
        <h3>Survey Questions</h3>

      </div>
      <div class="col s12 left-align">
        <form id="form2">

          <!-- Question 1 -->
          <h5><strong>Question 1</strong></h5>
          <p>You enjoy celebrating an occasion with a dinner out.</p>
          <p>
            <label>
              <input class="with-gap" name="group1" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group1" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group1" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group1" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group1" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 1 -->

          <!-- Question 2 -->
          <h5><strong>Question 2</strong></h5>
          <p>I find myself willing to forgive more often than not.</p>
          <p>
            <label>
              <input class="with-gap" name="group2" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group2" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group2" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group2" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group2" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 2 -->

          <!-- Question 3 -->
          <h5><strong>Question 3</strong></h5>
          <p>I would like to travel outside of my country multiple times during my lifetime.</p>
          <p>
            <label>
              <input class="with-gap" name="group3" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group3" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group3" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group3" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group3" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 3 -->

          <!-- Question 4 -->
          <h5><strong>Question 4</strong></h5>
          <p>I prefer movies and shows that I watched growing up compared to what is out currently.</p>
          <p>
            <label>
              <input class="with-gap" name="group4" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group4" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group4" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group4" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group4" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 4 -->

          <!-- Question 5 -->
          <h5><strong>Question 5</strong></h5>
          <p>When offering my criticism, I tend to have a gentle approach.</p>
          <p>
            <label>
              <input class="with-gap" name="group5" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group5" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group5" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group5" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group5" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 5 -->

          <!-- Question 6 -->
          <h5><strong>Question 6</strong></h5>
          <p>Better late than never!</p>
          <p>
            <label>
              <input class="with-gap" name="group6" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group6" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group6" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group6" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group6" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 6 -->

          <!-- Question 7 -->
          <h5><strong>Question 7</strong></h5>
          <p>When asked to donate to charities at the grocery store I try my best to give.</p>
          <p>
            <label>
              <input class="with-gap" name="group7" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group7" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group7" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group7" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group7" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 7 -->

          <!-- Question 8 -->
          <h5><strong>Question 8</strong></h5>
          <p>I prefer having a structured plan.</p>
          <p>
            <label>
              <input class="with-gap" name="group8" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group8" type="radio" value="2" />
              <span>2 (Slightly Disagree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group8" type="radio" value="3" checked />
              <span>3 (Neutral)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group8" type="radio" value="4" />
              <span>4 (Slightly Agree)</span>
            </label>
          </p>
          <p>
            <label>
              <input class="with-gap" name="group8" type="radio" value="5" />
              <span>5 (Strongly Agree)</span>
            </label>
          </p>
          <!-- End question 8 -->

          <!-- Question 9 -->
          <h5><strong>Question 9</strong></h5>
          <p>Failure is a stepping stone for learning.</p>
          <sppan>
            <label>
              <input class="with-gap" name="group9" type="radio" value="1" required />
              <span>1 (Strongly Disagree)</span>
            </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group9" type="radio" value="2" />
                <span>2 (Slightly Disagree)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group9" type="radio" value="3" checked />
                <span>3 (Neutral)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group9" type="radio" value="4" />
                <span>4 (Slightly Agree)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group9" type="radio" value="5" />
                <span>5 (Strongly Agree)</span>
              </label>
            </p>
            <!-- End question 9 -->

            <!-- Question 10 -->
            <h5><strong>Question 10</strong></h5>
            <p>I can keep my cool is heated situations.</p>
            <p>
              <label>
                <input class="with-gap" name="group10" type="radio" value="1" required />
                <span>1 (Strongly Disagree)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group10" type="radio" value="2" />
                <span>2 (Slightly Disagree)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group10" type="radio" value="3" checked />
                <span>3 (Neutral)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group10" type="radio" value="4" />
                <span>4 (Slightly Agree)</span>
              </label>
            </p>
            <p>
              <label>
                <input class="with-gap" name="group10" type="radio" value="5" />
                <span>5 (Strongly Agree)</span>
              </label>
            </p>
            <!-- End question 10 -->
        </form>
        <div class="col s12 center-align">
          <h4><strong>Fill out these last two pieces of info to see your friend match!</strong></h4>
          <div class="row">
            <div class="input-field col s12">
              <input id="name" type="text" class="validate" required>
              <label for="name">Enter your name (Required)</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <input id="pic" type="text" class="validate" required>
              <label for="pic">Enter a link to photo image of Yourself (Required)</label>
            </div>
          </div>
        </div>
        <button class="btn waves-effect waves-light col s12" type="submit" name="action" id="add-friend">
          Submit and find friend
          <i class="material-icons left">people_outline</i>
          <i class="material-icons right">people</i>
        </button>
        <div class="col s12 center-align" id="modal-button" style="visibility: hidden;">
          <br><br>

          <a class="waves-effect waves-light btn-floating btn-large cyan modal-trigger" href="#modal1"><i class="material-icons right">people</i></a>
          <span id="new-add-name"></span><span>'s friend matches!</span>
        </div>
      </div>
    </div>

    <div id="modal1" class="modal">
      <div class="modal-content">
        <!-- <h4 id="match-name">Name</h4>
        <img src="" id="match-pic"> -->
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>



  </div>


  <div id="friendpost"></div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


  <!-- internal javascript logic -->
  <script type="text/javascript">

    // set up modal code
    $(document).ready(function () {
      $('.modal').modal();
    });

    // When all form data is completed add the friend to the api and display their match
    $("#add-friend").on("click", function (event) {
      var newFriendName = $("#name").val().trim();
      event.preventDefault();
      if ($("#name").val().trim() != "" && $("#pic").val().trim() != "") {
        var formData = $("form").serializeArray();

        var newFriend = {
          name: newFriendName,
          photo: $("#pic").val().trim(),
          scores: [
            formData[0].value,
            formData[1].value,
            formData[2].value,
            formData[3].value,
            formData[4].value,
            formData[5].value,
            formData[6].value,
            formData[7].value,
            formData[8].value,
            formData[9].value
          ]
        };
        $("#name").val("");
        $("#pic").val("");
        console.log(newFriend);

        $.post("/api/friends", newFriend)
          .then(function (data) {
            $('.modal-content').empty();
            $('#modal-button').attr("style", "");
            $('#new-add-name').html(newFriendName);


            $('<h2>').html("You have " + data.length + " compatible friend!").appendTo($('.modal-content'));

            // $('#match-name').html(data[0].name + " is your most compatible friend!");
            // $('#match-pic').attr("src", data[0].photo);

            for (var index = 0; index < data.length; index++) {
              $('<h4>').html(data[index].name).appendTo($('.modal-content'));
              $('<img>').attr("src", data[index].photo).appendTo($('.modal-content'));
              $('<br>').appendTo($('.modal-content'));
              $('<hr>').appendTo($('.modal-content'));
              $('<br>').appendTo($('.modal-content'));
            }

            $('.modal').modal('open');

          });
      } else {
        alert("Please make sure you have typed in a name and a link to a photo!");
      }
    });
  </script>

</body>

</html>